<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CD-Ripper Settings</title>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/i18n.js"></script>
    <style>
        .settings-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .settings-section {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .settings-section h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .form-row.full {
            grid-template-columns: 1fr;
        }
        
        .form-field {
            display: flex;
            flex-direction: column;
        }
        
        .form-field label {
            font-weight: 500;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            color: var(--text-color);
        }
        
        .form-field small {
            font-size: 0.75rem;
            color: var(--secondary-color);
            margin-top: 0.25rem;
        }
        
        .form-field input,
        .form-field select {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }
        
        .form-field input[type="checkbox"] {
            width: auto;
            margin-right: 0.5rem;
        }
        
        .checkbox-wrapper {
            display: flex;
            align-items: center;
            padding: 0.5rem 0;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-secondary {
            background: var(--secondary-color);
            color: white;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }
        
        .alert-success {
            background: #d1fae5;
            border: 1px solid var(--success-color);
            color: #065f46;
        }
        
        .alert-error {
            background: #fee2e2;
            border: 1px solid var(--danger-color);
            color: #991b1b;
        }
        
        .alert-warning {
            background: #fed7aa;
            border: 1px solid var(--warning-color);
            color: #92400e;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container settings-container">
        <header>
            <h1>‚öôÔ∏è Einstellungen</h1>
            <div class="header-actions">
                <button onclick="window.location.href='/'" class="btn btn-secondary">‚¨ÖÔ∏è<span class="btn-text"> Zur√ºck</span></button>
            </div>
        </header>

        <div id="alertContainer"></div>

        <!-- Ripper Settings -->
        <div class="settings-section">
            <h2>üéµ CD-Ripper</h2>
            <div class="form-row">
                <div class="form-field">
                    <label for="device">CD-Laufwerk</label>
                    <input type="text" id="device" placeholder="/dev/sr0">
                    <small>Ger√§tepfad des CD-Laufwerks</small>
                </div>
                <div class="form-field">
                    <label for="quality">Ripping-Qualit√§t</label>
                    <select id="quality">
                        <option value="paranoia">Paranoia (Maximale Fehlerkorrektur)</option>
                        <option value="normal">Normal</option>
                        <option value="fast">Schnell</option>
                    </select>
                    <small>cdparanoia Modus</small>
                </div>
            </div>
        </div>

        <!-- Encoder Settings -->
        <div class="settings-section">
            <h2>üéß Audio-Encoding</h2>
            
            <h3 style="font-size: 1rem; margin: 1rem 0 0.5rem 0;">Kategorie 1+2 (Kinder & H√∂rb√ºcher)</h3>
            <div class="form-row">
                <div class="form-field">
                    <label for="cat12_format">Format</label>
                    <select id="cat12_format">
                        <option value="mp3">MP3</option>
                        <option value="flac">FLAC</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="cat12_bitrate">Bitrate (MP3)</label>
                    <input type="number" id="cat12_bitrate" placeholder="320">
                    <small>kbit/s (CBR)</small>
                </div>
            </div>
            
            <h3 style="font-size: 1rem; margin: 1rem 0 0.5rem 0;">Kategorie 3 (Musik)</h3>
            <div class="form-row">
                <div class="form-field">
                    <label for="cat3_format">Format</label>
                    <select id="cat3_format">
                        <option value="flac">FLAC</option>
                        <option value="mp3">MP3</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="cat3_compression">FLAC Compression</label>
                    <input type="number" id="cat3_compression" min="0" max="8" placeholder="8">
                    <small>Level 0-8 (8 = beste Kompression)</small>
                </div>
            </div>
        </div>

        <!-- Output Settings -->
        <div class="settings-section">
            <h2>üíæ Speicherorte</h2>
            <div class="form-row full">
                <div class="form-field">
                    <label for="local_path">Lokaler Output-Pfad</label>
                    <input type="text" id="local_path" placeholder="/mnt/dietpi_userdata/rips">
                    <small>Tempor√§res Verzeichnis f√ºr gerippte CDs</small>
                </div>
            </div>
        </div>

        <!-- Sync Settings -->
        <div class="settings-section">
            <h2>‚òÅÔ∏è Server-Synchronisation</h2>
            <div class="form-row">
                <div class="form-field">
                    <label for="sync_enabled">Automatischer Sync</label>
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="sync_enabled">
                        <span>Nach Ripping automatisch zum Server hochladen</span>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-field">
                    <label for="sync_host">Server-Adresse</label>
                    <input type="text" id="sync_host" placeholder="10.10.1.3">
                </div>
                <div class="form-field">
                    <label for="sync_user">Benutzername</label>
                    <input type="text" id="sync_user" placeholder="dietpi">
                </div>
            </div>
            
            <div class="form-row full">
                <div class="form-field">
                    <label for="sync_password">Passwort</label>
                    <input type="password" id="sync_password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    <small>‚ö†Ô∏è Wird als Klartext gespeichert. Besser: SSH-Keys verwenden</small>
                </div>
            </div>
            
            <h3 style="font-size: 1rem; margin: 1rem 0 0.5rem 0;">Zielpfade pro Kategorie</h3>
            <div class="form-row full">
                <div class="form-field">
                    <label for="remote_cat1">Kategorie 1 (Kinder)</label>
                    <input type="text" id="remote_cat1" placeholder="/mnt/SSD-1TB/dietpi_userdata/Music/Kids">
                </div>
            </div>
            <div class="form-row full">
                <div class="form-field">
                    <label for="remote_cat2">Kategorie 2 (H√∂rb√ºcher)</label>
                    <input type="text" id="remote_cat2" placeholder="/mnt/SSD-1TB/dietpi_userdata/Audiobooks">
                </div>
            </div>
            <div class="form-row full">
                <div class="form-field">
                    <label for="remote_cat3">Kategorie 3 (Musik)</label>
                    <input type="text" id="remote_cat3" placeholder="/mnt/SSD-1TB/dietpi_userdata/Music">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-field">
                    <label for="cleanup">Cleanup nach Sync</label>
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="cleanup">
                        <span>Lokale Dateien nach erfolgreichem Upload l√∂schen</span>
                    </div>
                </div>
                <div class="form-field">
                    <label for="auto_eject">CD automatisch auswerfen</label>
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="auto_eject">
                        <span>CD nach Sync automatisch auswerfen</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Web Interface Settings -->
        <div class="settings-section">
            <h2>üåê Web-Interface</h2>
            <div class="form-row">
                <div class="form-field">
                    <label for="web_port">Port</label>
                    <input type="number" id="web_port" placeholder="5000">
                    <small>Port f√ºr das Web-Interface</small>
                </div>
                <div class="form-field">
                    <label for="web_language">Sprache / Language</label>
                    <select id="web_language">
                        <option value="en">English</option>
                        <option value="de">Deutsch</option>
                    </select>
                    <small>Interface language</small>
                </div>
            </div>
        </div>

        <!-- Logging Settings -->
        <div class="settings-section">
            <h2>üìã Logging</h2>
            <div class="form-row">
                <div class="form-field">
                    <label for="log_level">Log-Level</label>
                    <select id="log_level">
                        <option value="DEBUG">DEBUG</option>
                        <option value="INFO">INFO</option>
                        <option value="WARNING">WARNING</option>
                        <option value="ERROR">ERROR</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="log_file">Log-Datei</label>
                    <input type="text" id="log_file" placeholder="/root/projects/cd-ripper/logs/ripper.log">
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button onclick="window.location.href='/'" class="btn btn-secondary">Abbrechen</button>
            <button onclick="saveConfig()" class="btn btn-success">üíæ Speichern</button>
            <button onclick="saveAndRestart()" class="btn btn-primary">üíæ Speichern & Neu starten</button>
        </div>
    </div>

    <script src="/static/settings.js"></script>
</body>
</html>
